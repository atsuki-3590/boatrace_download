# ボートレースデータ スクレイピングプロジェクト

## 概要

このプロジェクトは、ボートレース公式サイトから各種データをスクレイピングし、分析可能な形式で保存するためのツール群です。
主に「番組表」「競争成績」「オッズ」の3種類のデータを取得します。

## 取得データ

### 1\. 番組表データ

レースの出走選手やモーター情報など、レース前の詳細な情報を取得します。

  - **サイトURL:** [https://www1.mbrace.or.jp/od2/B/dindex.html](https://www1.mbrace.or.jp/od2/B/dindex.html)
  - **関連スクリプト:**
      - `info_crawling.py`: LZH形式の圧縮データをダウンロードします。
      - `info_unzip.py`: ダウンロードしたデータを解凍します。
      - `info_scraping.py`: 解凍したテキストデータを解析し、CSVファイルとして整形します。

### 2\. 競争成績データ

レースの結果や払戻金など、レース後の詳細な情報を取得します。

  - **サイトURL:** [https://www1.mbrace.or.jp/od2/K/dindex.html](https://www1.mbrace.or.jp/od2/K/dindex.html)
  - **関連スクリプト:**
      - `result_crawling.py`: LZH形式の圧縮データをダウンロードします。
      - `result_unzip.py`: ダウンロードしたデータを解凍します。
      - `result_scraping.py`: 解凍したテキストデータを解析し、CSVファイルとして整形します。

### 3\. オッズデータ

3連複オッズの情報を取得します。この処理には `Scrapy` フレームワークを使用しています。

  - **サイトURL:** [https://www.boatrace.jp/owpc/pc/race/odds3f?rno=12&jcd=12&hd=20241222](https://www.boatrace.jp/owpc/pc/race/odds3f?rno=12&jcd=12&hd=20241222)
  - **関連スクリプト:**
      - `odds_scrapy/odds_scrapy/spiders/odds_spider.py`: オッズ情報を取得するためのScrapyスパイダーです。
  - **実行方法:**
    以下のコマンドをターミナルで実行します。
    ```bash
    cd odds_scrapy
    scrapy crawl odds_spider
    ```

-----

## データ仕様（カラム一覧）

### 番組表データ

```
タイトル
日次
レース日
レース場
レース回
レース名
距離(m)
電話投票締切予定
1枠_艇番, 1枠_登録番号, 1枠_選手名, 1枠_年齢, 1枠_支部, 1枠_体重, 1枠_級別, 1枠_全国勝率, 1枠_全国2連対率, 1枠_当地勝率, 1枠_当地2連対率, 1枠_モーター番号, 1枠_モーター2連対率, 1枠_ボート番号, 1枠_ボート2連対率, 1枠_今節成績_1-1, 1枠_今節成績_1-2, 1枠_今節成績_2-1, 1枠_今節成績_2-2, 1枠_今節成績_3-1, 1枠_今節成績_3-2, 1枠_今節成績_4-1, 1枠_今節成績_4-2, 1枠_今節成績_5-1, 1枠_今節成績_5-2, 1枠_今節成績_6-1, 1枠_今節成績_6-2, 1枠_早見
2枠_艇番, 2枠_登録番号, 2枠_選手名, 2枠_年齢, 2枠_支部, 2枠_体重, 2枠_級別, 2枠_全国勝率, 2枠_全国2連対率, 2枠_当地勝率, 2枠_当地2連対率, 2枠_モーター番号, 2枠_モーター2連対率, 2枠_ボート番号, 2枠_ボート2連対率, 2枠_今節成績_1-1, 2枠_今節成績_1-2, 2枠_今節成績_2-1, 2枠_今節成績_2-2, 2枠_今節成績_3-1, 2枠_今節成績_3-2, 2枠_今節成績_4-1, 2枠_今節成績_4-2, 2枠_今節成績_5-1, 2枠_今節成績_5-2, 2枠_今節成績_6-1, 2枠_今節成績_6-2, 2枠_早見
3枠_艇番, 3枠_登録番号, 3枠_選手名, 3枠_年齢, 3枠_支部, 3枠_体重, 3枠_級別, 3枠_全国勝率, 3枠_全国2連対率, 3枠_当地勝率, 3枠_当地2連対率, 3枠_モーター番号, 3枠_モーター2連対率, 3枠_ボート番号, 3枠_ボート2連対率, 3枠_今節成績_1-1, 3枠_今節成績_1-2, 3枠_今節成績_2-1, 3枠_今節成績_2-2, 3枠_今節成績_3-1, 3枠_今節成績_3-2, 3枠_今節成績_4-1, 3枠_今節成績_4-2, 3枠_今節成績_5-1, 3枠_今節成績_5-2, 3枠_今節成績_6-1, 3枠_今節成績_6-2, 3枠_早見
4枠_艇番, 4枠_登録番号, 4枠_選手名, 4枠_年齢, 4枠_支部, 4枠_体重, 4枠_級別, 4枠_全国勝率, 4枠_全国2連対率, 4枠_当地勝率, 4枠_当地2連対率, 4枠_モーター番号, 4枠_モーター2連対率, 4枠_ボート番号, 4枠_ボート2連対率, 4枠_今節成績_1-1, 4枠_今節成績_1-2, 4枠_今節成績_2-1, 4枠_今節成績_2-2, 4枠_今節成績_3-1, 4枠_今節成績_3-2, 4枠_今節成績_4-1, 4枠_今節成績_4-2, 4枠_今節成績_5-1, 4枠_今節成績_5-2, 4枠_今節成績_6-1, 4枠_今節成績_6-2, 4枠_早見
5枠_艇番, 5枠_登録番号, 5枠_選手名, 5枠_年齢, 5枠_支部, 5枠_体重, 5枠_級別, 5枠_全国勝率, 5枠_全国2連対率, 5枠_当地勝率, 5枠_当地2連対率, 5枠_モーター番号, 5枠_モーター2連対率, 5枠_ボート番号, 5枠_ボート2連対率, 5枠_今節成績_1-1, 5枠_今節成績_1-2, 5枠_今節成績_2-1, 5枠_今節成績_2-2, 5枠_今節成績_3-1, 5枠_今節成績_3-2, 5枠_今節成績_4-1, 5枠_今節成績_4-2, 5枠_今節成績_5-1, 5枠_今節成績_5-2, 5枠_今節成績_6-1, 5枠_今節成績_6-2, 5枠_早見
6枠_艇番, 6枠_登録番号, 6枠_選手名, 6枠_年齢, 6枠_支部, 6枠_体重, 6枠_級別, 6枠_全国勝率, 6枠_全国2連対率, 6枠_当地勝率, 6枠_当地2連対率, 6枠_モーター番号, 6枠_モーター2連対率, 6枠_ボート番号, 6枠_ボート2連対率, 6枠_今節成績_1-1, 6枠_今節成績_1-2, 6枠_今節成績_2-1, 6枠_今節成績_2-2, 6枠_今節成績_3-1, 6枠_今節成績_3-2, 6枠_今節成績_4-1, 6枠_今節成績_4-2, 6枠_今節成績_5-1, 6枠_今節成績_5-2, 6枠_今節成績_6-1, 6枠_今節成績_6-2, 6枠_早見
```

### 競争成績データ

```
レースコード
タイトル
日次
レース日
レース場
レース回
レース名
距離(m)
天候
風向
風速(m)
波の高さ(cm)
決まり手
単勝_艇番, 単勝_払戻金
複勝_1着_艇番, 複勝_1着_払戻金, 複勝_2着_艇番, 複勝_2着_払戻金
2連単_組番, 2連単_払戻金, 2連単_人気
2連複_組番, 2連複_払戻金, 2連複_人気
拡連複_1-2着_組番, 拡連複_1-2着_払戻金, 拡連複_1-2着_人気
拡連複_1-3着_組番, 拡連複_1-3着_払戻金, 拡連複_1-3着_人気
拡連複_2-3着_組番, 拡連複_2-3着_払戻金, 拡連複_2-3着_人気
3連単_組番, 3連単_払戻金, 3連単_人気
3連複_組番, 3連複_払戻金, 3連複_人気
1着_着順, 1着_艇番, 1着_登録番号, 1着_選手名, 1着_モーター番号, 1着_ボート番号, 1着_展示タイム, 1着_進入コース, 1着_スタートタイミング, 1着_レースタイム
2着_着順, 2着_艇番, 2着_登録番号, 2着_選手名, 2着_モーター番号, 2着_ボート番号, 2着_展示タイム, 2着_進入コース, 2着_スタートタイミング, 2着_レースタイム
3着_着順, 3着_艇番, 3着_登録番号, 3着_選手名, 3着_モーター番号, 3着_ボート番号, 3着_展示タイム, 3着_進入コース, 3着_スタートタイミング, 3着_レースタイム
4着_着順, 4着_艇番, 4着_登録番号, 4着_選手名, 4着_モーター番号, 4着_ボート番号, 4着_展示タイム, 4着_進入コース, 4着_スタートタイミング, 4着_レースタイム
5着_着順, 5着_艇番, 5着_登録番号, 5着_選手名, 5着_モーター番号, 5着_ボート番号, 5着_展示タイム, 5着_進入コース, 5着_スタートタイミング, 5着_レースタイム
6着_着順, 6着_艇番, 6着_登録番号, 6着_選手名, 6着_モーター番号, 6着_ボート番号, 6着_展示タイム, 6着_進入コース, 6着_スタートタイミング, 6着_レースタイム
```